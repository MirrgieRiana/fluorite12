# 配列リテラル `[value; ...]`

`[` `]` は配列を作るリテラルです。

括弧内には、 `;` で区切って0個以上の値を書くことができます。

```shell
$ flc '[1; 2; 3]'
# [1;2;3]
```

---

`;` で区切られた項がストリームである場合、ストリームそのものではなくストリームの各要素が配列に格納されます。

```shell
$ flc '[1 .. 3 | _ * 10; 4 .. 6 | _ * 100]'
# [10;20;30;400;500;600]
```

---

配列リテラル内での `;` の記述は柔軟です。

項の前後や中間に `;` を余計に多く書いても問題ありません。

また、改行は `;` の代わりになります。

```shell
$ flc '[
  10
  20
  ; ; ; 30; ; ;
]'
# [10;20;30]
```

# 配列の複製 `array[]`

配列の浅いコピーを生成します。

生成された配列に対する変更は、元の配列には反映されません。

```shell
$ flc '
  a := [1, 2, 3]
  b := a[]
  
  b(1) = 99
  
  OUT << a
  OUT << b
  
  ; ,
'
# [1;2;3]
# [1;99;3]
```

# 部分配列の取得 `array[indices]`

ストリーム `indices` に含まれるインデックスの要素が順番に格納された配列を生成します。

```shell
$ flc '[1, 2, 3, 4, 5][1 .. 3]'
# [2;3;4]
```

---

`indices` が空ストリームの場合、空の配列が生成されます。

```shell
$ flc '[1, 2, 3, 4, 5][,]'
# []
```

---

`indices` がストリームでない場合、そのインデックスの単一の要素のみで構成される配列が生成されます。

```shell
$ flc '[1, 2, 3, 4, 5][2]'
# [3]
```

# 配列のストリーム化 `array()`

配列の各要素を順番にイテレートするストリームを返します。

```shell
$ flc '[1, 2, 3]()'
# 1
# 2
# 3
```

---

以下は、配列を、各要素を10倍した配列にする例です。

```shell
$ flc '[1, 2, 3]() | _ * 10 >> ARRAY'
# [10;20;30]
```

# 配列の要素アクセス `array(index)`

配列の要素にインデックスでアクセスできます。

```shell
$ flc '[0, 10, 20](1)'
# 10
```

---

インデックスは数値化されたあと、四捨五入されて評価されます。

これにより、計算上整数になる計算結果を使ったアクセスが容易になります。

```shell
$ flc '[0, 10, 20]("0.95")'
# 10

$ flc '[0, 10, 20](SQRT(16) - SQRT(9))'
# 10
```

---

インデックスが負の場合、配列の末尾からの相対位置として解釈されます。

```shell
$ flc '[0, 10, 20](-1)'
# 20
```

---

インデックスがストリームの場合、各インデックスの要素を順番に取得します。

```shell
$ flc '[0, 10, 20](2, 1)'
# 20
# 10
```

---

fluorite12において、配列の要素アクセスは関数呼び出しの一種です。

そのため、関数に対して定義された操作は、配列に対してもできます。

```shell
$ flc '3 .. 1 >> [0, 10, 20, 30, 40]'
# 30
# 20
# 10
```

# 配列の要素アクセス `array.index`

`.` 演算子で配列の要素にアクセスできます。

```shell
$ flc '[10, 20, 30].1'
# 20
```

---

オブジェクトの要素アクセスと同様に、 `.` の右辺を式にすることができます。

```shell
$ flc '[10, 20, 30].(1 + 1)'
# 30
```

---

添え字が負数であった場合は `NULL` が返されます。

```shell
$ flc '[10, 20, 30].(-1)'
# NULL
```

---

インデックスは数値化されたあと、四捨五入されて評価されます。

```shell
$ flc '[10, 20, 30].("0.95")'
# 20
```
